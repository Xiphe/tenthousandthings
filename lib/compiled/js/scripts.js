!function(){"use strict";angular.module("tenthousandthings",["infinite-scroll"])}(),function(){"use strict";var a="/_things/page:page.json";angular.module("tenthousandthings").directive("tttList",["$http","$q","tttColor",function(b,c,d){return{restrict:"E",replace:!0,templateUrl:"list.html",controller:["$scope",function(e){function f(){return k>j}function g(d){var e=c.defer(),f=a.replace(":page",d);return b.get(f).then(function(a){e.resolve(a.data)},e.reject),e.promise}function h(a){e.things.forEach(function(b){b.loaded||angular.isUndefined(a[b.path])||(b.content=a[b.path],b.loaded=!0)})}var i=window.ttt,j=i.page||1,k=i.pages||1;delete window.ttt,d.setSalt(i.colorSalt),d.setSalt(i.colorSalt2,"2"),e.things=i.initial||[],e.hasPages=f(),e.scroll=function(){e.hasPages&&(e.hasPages=!1,c.when(g(j+1)).then(h).then(function(){j+=1,e.hasPages=f()}))}}]}}])}(),function(){"use strict";angular.module("tenthousandthings").directive("tttThing",["tttColor",function(a){return{restrict:"E",replace:!0,scope:{thing:"="},templateUrl:"thing.html",controller:["$sce","$scope",function(b,c){var d=a.stringToColor(c.thing.categories[0]),e=a.stringToColor(c.thing.categories[0],"2"),f=a.getContrastColor(d,"111111","eeeeee");c.style={"background-color":"#"+d,"border-color":"#"+e,color:"#"+f},c.getContent=function(){return c.thing.loaded?b.trustAsHtml(c.thing.content):void 0}}]}}])}(),function(){"use strict";angular.module("tenthousandthings").factory("tttColor",[function(){function a(a){for(var b=0,c=0;c<a.length;c++)b=a.charCodeAt(c)+((b<<5)-b),b|=1;return b}function b(a){var b="";return[0,8,16].forEach(function(c){var d=(a>>c&255).toString(16);1===d.length&&(d=0+d),b+=d}),b}function c(c,d){var e="default";return d&&(e="_"+d),c+=g[e],f[c]||(f[c]=b(a(c))),f[c]}function d(a,b,c){var d=parseInt(a.substring(0,2),16),e=parseInt(a.substring(2,4),16),f=parseInt(a.substring(4,6),16),g=Math.round((299*d+587*e+114*f)/1e3);return g>125?b||"000000":c||"ffffff"}function e(a,b){var c="default";b&&(c="_"+b),g[c]=""+a}var f={},g={"default":""};return{stringToColor:c,getContrastColor:d,setSalt:e}}])}(),angular.module("tenthousandthings").run(["$templateCache",function(a){"use strict";a.put("list.html",'<div class="ttt-list"\n	infinite-scroll="scroll()"\n	infinite-scroll-disabled="!hasPages"\n	infinite-scroll-immediate-check="false"\n>\n	<ttt-thing ng-repeat="thing in things" thing="thing"></ttt-thing>\n</div>'),a.put("thing.html",'<article ng-if="thing.loaded" class="ttt-thing" ng-style="style">\n	<div class="wrap">\n		<h3>{{thing.title}}</h3>\n		<div ng-bind-html="getContent()"></div>\n	</div>\n</article>')}]);
//# sourceMappingURL=scripts.map